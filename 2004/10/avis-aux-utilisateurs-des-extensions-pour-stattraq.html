<!DOCTYPE html> 
<html lang="en">
<!--
	Access keys:
		H = homepage
		S = search input field
		L = latest article on the homepage
		A = about page
-->
<head>
    <title>
        Avis aux utilisateurs des extensions pour StatTraq
        
    </title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<meta http-equiv="content-language" content="en" />
	<meta name="author" content="Jonathan Foucher" />
	<meta name="designer" content="Jonathan Foucher" />
	<meta name="developer" content="Jonathan Foucher" />
	<meta name="description" content="A blog about web development, codeigniter and wordpress, by web developer Jonathan Foucher" />
	<meta name="keywords" content="Web development, france, wordpress, codeigniter, linux, ubuntu, debian, system administration" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
	<link rel="license" href="http://creativecommons.org/licenses/by-nc-nd/2.5/en/" />
    <link href='http://fonts.googleapis.com/css?family=Questrial' rel='stylesheet' type='text/css'>
	<link rel="stylesheet/less" href="/assets/css/screen.less" type="text/css" media="screen" />

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>

    <script src="/assets/js/jquery.timeago.js" type="text/javascript"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
    <!--<link rel="stylesheet" href="/assets/css/screen.css" type="text/css" media="screen" />-->
    <script src="/assets/js/less-1.1.4.js" type="text/javascript"></script>
    <!--[if lt IE 9]>
    <script type="text/javascript" src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
	<link rel="alternate" href="http://feeds.feedburner.com/GeekyNuggets" title="Geeky Nuggets" type="application/atom+xml" />

	<link rel="shortcut icon" type="image/png" href="/favicon.png" />

</head>
<body>

	<div id="container" class="clearfix">
		                <header id="header" class="center">
            <div class="logo">
                <a href="/" title="Return to homepage" tabindex="0" accesskey="H">
                    Geeky Nuggets
                </a>
            </div>
            <div class="siteDesc"><a href="/about.html#notebook" title="About Jonathan Foucher
                &amp; contact details" tabindex="0" accesskey="A">Jonathan Foucher</a>&rsquo;s blog <span
                class="amp">&amp;</span> web development
                notebook.
            </div>
                    <nav id="nav" class="clear">
            <ul class="nav nav-header caps">
				<li><a href="/about.html#notebook" title="About &amp; contact information" tabindex="0">About <span class="amp">&amp;</span> Contact</a></li>
				<li><a href="/archives.html#cover" title="View the blog archives" tabindex="0">Archives</a></li>
				<li><a href="/projects/#notebook" title="Go to the code portfolio of Jonathan Foucher" tabindex="0">Projects</a></li>
				<li><a href="http://feeds.feedburner.com/GeekyNuggets" title="Subscribe to my posts, by email or in your feed reader" tabindex="0">Feed</a></li>
            </ul>
			<div class="sitesearch">

                <!-- Google Custom Search Element -->
                <!--<form action="http://www.google.com/cse" class="center_column" id="searchForm" >
                    <fieldset>
                       <input type="hidden" name="cx" value="004905032692135561336:flcwnz7i1ww" />
                       <input type="hidden" name="ie" value="UTF-8" />
                       <label for="search" class="hidden">Search</label>
                       <input id="search" class="text-input" type="text" name="q" size="15" tabindex="0" accesskey="S" />
                       <input id="searchsubmit" type="submit" name="sa" value="Search" tabindex="0" />
                    </fieldset>
                </form>-->

            </div>

        </nav> <!-- /#nav.clear -->


            
		</header> <!-- /#header.center -->
        <div class="hero">

            <p>
                
            </p>
        </div>

		<div id="notebook" class="center clear">
			<div class="page-nav-top">
                
				    <span class="page-nav-item floatLeft"><a class="internal" rel="prev"  href="/2004/10/spam-dans-les-refrents.html#notebook" title="View Referrer SpamSpam dans les référents">&larr; View previous article</a></span>
				
				
				    <span class="page-nav-item floatRight"><a class="internal" rel="next"  href="/2004/11/hacker.html#notebook" title="View Hacker">View next article &rarr;</a></span>
                
            </div> <!-- /.page-nav-top -->

             <h2 class="post-title">
                <a href="/2004/10/avis-aux-utilisateurs-des-extensions-pour-stattraq.html#notebook" title="Permanent link to Avis aux utilisateurs des extensions pour StatTraq">
                    Avis aux utilisateurs des extensions pour StatTraq
                </a>
            </h2>
            <div class="meta">
                <!-- <span class="pdf">Download a <a href="/2004/10/avis-aux-utilisateurs-des-extensions-pour-stattraq.html.pdf" title="Download a PDF, printer-friendly copy of this article"><acronym title="Portable Document Format">PDF</acronym>, printer-friendly version of this article</a>.</span> -->
                <span class="permalink">For referencing: <a href="/2004/10/avis-aux-utilisateurs-des-extensions-pour-stattraq.html" title="[Permalink] Avis aux utilisateurs des extensions pour StatTraq">permalink to this article</a>.</span>
                    <span class="date" title="2004-10-14T17:01:58+02:00">
                    <span class="published">Published&thinsp;&bull;</span>
                    <span class="day">14</span>
                    <span class="month"><abbr>Oct</abbr></span>
                    <span class="year">2004</span>
                </span>
            </div> <!-- /.meta -->
            <div id="entry-content">

                <p><strong>Le Problème</strong></p>

<p>C'est que si vous utilisez une structure des permaliens où l'id du billet n'est pas présente, telle que celle-ci:</p>

<div class="highlight"><pre><code class="php"><span class="x">     /%year%/%monthnum%/%day%/%postname%/</span>
</code></pre>
</div>


<p>L'id du billet n'est pas ajouté à la table de Stat Traq, ce qui fait que mon plugin <a href="http://jfoucher.com/2004/10/popular-posts-wordpress-plugin">Populaires</a> ne comprend plus ce qu'il lui arrive. La solution est en fait très simple</p>

<p><strong>La Solution</strong> (j'espère)</p>

<p>Dans le fichier stattraq.php, vous trouverez les lignes suivantes (25 et 26)</p>

<div class="highlight"><pre><code class="php"><span class="x">    if (($p != &#39;&#39;)){</span>
<span class="x">    $p = intval($p);</span>
</code></pre>
</div>


<p>Mais la variable</p>

<div class="highlight"><pre><code class="php"><span class="x">$p</span>
</code></pre>
</div>


<p> n'existe que si le billet est sélectionné par son id. S'il a été selectionné par nom,</p>

<div class="highlight"><pre><code class="php"><span class="x">$p</span>
</code></pre>
</div>


<p> est nul.</p>

<p>Il faut donc remplacer les lignes ci-dessus par celles-la</p>

<div class="highlight"><pre><code class="php"><span class="x">     if (($post-&gt;ID != &#39;&#39;)){</span>
<span class="x">     $p = intval($post-&gt;ID);</span>
</code></pre>
</div>


<p>Et ça a l'air de marcher avec tous les schémas de réécriture.
<strong>Le Problème</strong></p>

<p>C'est que si vous utilisez une structure des permaliens où l'id du billet n'est pas présente, telle que celle-ci:</p>

<div class="highlight"><pre><code class="php"><span class="x">     /%year%/%monthnum%/%day%/%postname%/</span>
</code></pre>
</div>


<p>L'id du billet n'est pas ajouté à la table de Stat Traq, ce qui fait que mon plugin <a href="http://jfoucher.com/2004/10/popular-posts-wordpress-plugin">Populaires</a> ne comprend plus ce qu'il lui arrive. La solution est en fait très simple</p>

<p><strong>La Solution</strong> (j'espère)</p>

<p>Dans le fichier stattraq.php, vous trouverez les lignes suivantes (25 et 26)</p>

<div class="highlight"><pre><code class="php"><span class="x">    if (($p != &#39;&#39;)){</span>
<span class="x">    $p = intval($p);</span>
</code></pre>
</div>


<p>Mais la variable</p>

<div class="highlight"><pre><code class="php"><span class="x">$p</span>
</code></pre>
</div>


<p> n'existe que si le billet est sélectionné par son id. S'il a été selectionné par nom,</p>

<div class="highlight"><pre><code class="php"><span class="x">$p</span>
</code></pre>
</div>


<p> est nul.</p>

<p>Il faut donc remplacer les lignes ci-dessus par celles-la</p>

<div class="highlight"><pre><code class="php"><span class="x">     if (($post-&gt;ID != &#39;&#39;)){</span>
<span class="x">     $p = intval($post-&gt;ID);</span>
</code></pre>
</div>


<p>Et ça a l'air de marcher avec tous les schémas de réécriture.</p>


            </div> <!-- /.entry-content.colEight -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'geekynuggets'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>

            <div class="page-nav-bottom">
                
				    <span class="page-nav-item floatLeft"><a class="internal" rel="prev"  href="/2004/10/spam-dans-les-refrents.html#notebook" title="Read Referrer SpamSpam dans les référents">&larr; View previous article</a></span>
				
				
				    <span class="page-nav-item floatRight"><a class="internal" rel="next"  href="/2004/11/hacker.html#notebook" title="Read Hacker">View next article &rarr;</a></span>
                
            </div> <!-- /.page-nav-bottom -->
        </div> <!-- /#notebook.center.clear -->

	</div>
    <footer id="footer" class="clear">
        <ul class="nav nav-footer caps">
            <li><a href="/about.html" title="About &amp; contact information" tabindex="0">About <span class="amp">&amp;</span> Contact</a></li>
            <li><a href="/archives.html#cover" title="View the blog archives" tabindex="0">Blog</a></li>
            <li><a href="/projects/#notebook" title="Go to the code portfolio of Jonathan Foucher" tabindex="0">Projects</a></li>
            <li><a href="http://feeds.feedburner.com/GeekyNuggets" title="Feed link" tabindex="0">Feed</a></li>
        </ul>
        <span class="backtop floatRight"><a class="internal" href="#header" title="Return to the top of this page">Back to top &uarr;</a></span>
        <div class="page-meta clear">
            <div class="info">

                <p class="copyright ">
                    This blog has been online in one form or another since
                    <span class="date" title="March 2004">2004</span>&thinsp;&mdash;&thinsp;copyright &copy; Jonathan
                    Foucher.&thinsp;&mdash;&thinsp;<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"
                       title="You can use this for non-comercial purposes, provided you cite me as the author, and do not modify the content">
                        Creative Commons License
                    </a>.
                </p>
            </div>

        </div> <!-- /.page-meta.clear -->
    </footer> <!-- /#footer.center.clear -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8465441-2']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') +
        '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    </script>

</body>
</html>