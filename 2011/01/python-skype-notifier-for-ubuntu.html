<!DOCTYPE html> 
<html lang="en">
<!--
	Access keys:
		H = homepage
		S = search input field
		L = latest article on the homepage
		A = about page
-->
<head>
    <title>
        Python skype notifier for Ubuntu
        
    </title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<meta http-equiv="content-language" content="en" />
	<meta name="author" content="Jonathan Foucher" />
	<meta name="designer" content="Jonathan Foucher" />
	<meta name="developer" content="Jonathan Foucher" />
	<meta name="description" content="Learning python by building a semi-useful Skype instant message notifierLearning python by building a semi-useful Skype instant message notifier" />
	<meta name="keywords" content="Web development, france, wordpress, codeigniter, linux, ubuntu, debian, system administration" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
	<link rel="license" href="http://creativecommons.org/licenses/by-nc-nd/2.5/en/" />
    <link href='http://fonts.googleapis.com/css?family=Questrial' rel='stylesheet' type='text/css'>
	<!--<link rel="stylesheet" href="/assets/css/screen.css" type="text/css" media="screen" />-->

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>

    <script src="/assets/js/jquery.timeago.js" type="text/javascript"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
    <link rel="stylesheet" href="/assets/css/screen.css" type="text/css" media="screen" />
    <script src="/assets/js/less-1.1.4.js" type="text/javascript"></script>
    <!--[if lt IE 9]>
    <script type="text/javascript" src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <script type="text/javascript" src="http://www.shrinktheweb.com/scripts/pagepix.js"></script>
	<link rel="alternate" href="http://feeds.feedburner.com/GeekyNuggets" title="Geeky Nuggets" type="application/atom+xml" />

	<link rel="shortcut icon" type="image/png" href="/favicon.png" />

</head>
<body>


	<div id="container" class="clearfix">
		                <header id="header" class="center">
            <div class="logo">
                <a href="/" title="Return to homepage" tabindex="0" accesskey="H">
                    Geeky Nuggets
                </a>
            </div>
            <div class="siteDesc"><a href="/about.html#notebook" title="About Jonathan Foucher
                &amp; contact details" tabindex="0" accesskey="A">Jonathan Foucher</a>&rsquo;s blog <span
                class="amp">&amp;</span> web development
                notebook.
            </div>
                    <nav id="nav" class="clear">
            <ul class="nav nav-header caps">
				<li><a href="/about.html#notebook" title="About &amp; contact information" tabindex="0">About <span class="amp">&amp;</span> Contact</a></li>
				<li class="active"><a href="/archives.html#cover" title="View the blog archives" tabindex="0">Archives</a></li>
				<li><a href="/projects/#notebook" title="Go to the code portfolio of Jonathan Foucher" tabindex="0">Projects</a></li>
				<li><a href="http://feeds.feedburner.com/GeekyNuggets" title="Subscribe to my posts, by email or in your feed reader" tabindex="0">Feed</a></li>
            </ul>
			<div class="sitesearch">

                <!-- Google Custom Search Element -->
                <!--<form action="http://www.google.com/cse" class="center_column" id="searchForm" >
                    <fieldset>
                       <input type="hidden" name="cx" value="004905032692135561336:flcwnz7i1ww" />
                       <input type="hidden" name="ie" value="UTF-8" />
                       <label for="search" class="hidden">Search</label>
                       <input id="search" class="text-input" type="text" name="q" size="15" tabindex="0" accesskey="S" />
                       <input id="searchsubmit" type="submit" name="sa" value="Search" tabindex="0" />
                    </fieldset>
                </form>-->

            </div>

        </nav> <!-- /#nav.clear -->


            
		</header> <!-- /#header.center -->


		<div id="notebook" class="center clear">
			<div class="page-nav-top">
                
				    <span class="page-nav-item page-prev"><a class="internal" rel="prev"  href="/2011/01/compile-custom-kernel-on-ubuntu-10-10.html#notebook" title="View Compile custom kernel on Ubuntu 10.10">&larr; View previous article</a></span>
				
				
				    <span class="page-nav-item page-next"><a class="internal" rel="next"  href="/2011/01/spanish-characters-on-qwerty-keyboard-for-ubuntu-10-10.html#notebook" title="View Spanish characters on Qwerty keyboard for Ubuntu 10.10">View next article &rarr;</a></span>
                
            </div> <!-- /.page-nav-top -->

             <h2 class="post-title">
                <a href="/2011/01/python-skype-notifier-for-ubuntu.html#notebook" title="Permanent link to Python skype notifier for Ubuntu">
                    Python skype notifier for Ubuntu
                </a>
            </h2>

            <div class="meta">
                <div class="hero">

                    <p>
                        <!--:en-->Learning python by building a semi-useful Skype instant message notifier<!--:--><!--:fr-->Learning python by building a semi-useful Skype instant message notifier<!--:-->
                    </p>
                </div>
                <!-- <span class="pdf">Download a <a href="/2011/01/python-skype-notifier-for-ubuntu.html.pdf" title="Download a PDF, printer-friendly copy of this article"><acronym title="Portable Document Format">PDF</acronym>, printer-friendly version of this article</a>.</span> -->
                <span class="permalink">For referencing: <a href="/2011/01/python-skype-notifier-for-ubuntu.html" title="[Permalink] Python skype notifier for Ubuntu">permalink to this article</a>.</span>
                    <span class="date" title="2011-01-14T12:21:52+00:00">
                    <span class="published">Published&thinsp;&bull;</span>
                    <span class="day">14</span>
                    <span class="month"><abbr>Jan</abbr></span>
                    <span class="year">2011</span>
                </span>
            </div> <!-- /.meta -->
            <div id="entry-content">

                <p>What's the best way to learn a new programming language ? Well, according to <a href="http://programmers.stackexchange.com/q/3519/3984">this question</a> the best (only ?) way to learn a new language is just to code in that language.</p>

<h3>Why Python ?</h3>


<p>Because it's <a href="http://en.wikipedia.org/wiki/Python_(programming_language)#Name_and_neologisms">named after the Monty Python</a></p>

<p>No, seriously, that's why :<a href="http://xkcd.com/353/"><img class="aligncenter size-medium wp-image-201" title="python" src="http://cdn.jfoucher.com/uploads/2011/01/python-264x300.png" alt="I wrote 20 short programs in Python yesterday.  It was wonderful.  Perl, I'm leaving you." width="264" height="300" /></a>No, not this "that's why"! <a href="http://programmers.stackexchange.com/questions/10675/ideal-programming-language-learning-sequence#answer-10748">That one</a></p>

<p>If you are just starting out as a programmer, I cannot recommend <a href="http://learnpythonthehardway.org/">Learn Python The Hard Way</a> highly enough. It is an excellent introduction to the ideas and skills you will need as a programmer, starting from the very basics, like you've never seen a for loop in your life. Actually the first 10 or so lessons do not include ANY control structures!</p>

<p>If on the other hand you  already have some coding experience, I recomend <a href="http://diveintopython.org/">Dive Into Python</a>.  Although it's no quite as hands on as Learn Python the Hard Way, it's a very good book, only covering the basics insofar as they are specific to python.</p>

<h3>Why for <a href="/2011/01/193-compile-custom-kernel-on-ubuntu-10-10.html">Ubuntu</a>?</h3>


<p>That's what I use. Simple as that. Also python and pygtk are included by default, making distribution much easier.</p>

<h3>Why Skype?</h3>


<p>Haven't found out yet. I started developping a backup application in pygtk and glade, a front end to rsync, but got sidetracked reading about the chnges to Ubuntu's <a href="https://wiki.ubuntu.com/DesktopExperienceTeam/ApplicationIndicators">application notifier</a>, ended up interested in the <a href="https://wiki.ubuntu.com/MessagingMenu">messaging notifier</a>, and decided to do something with that.</p>

<p>Skype seemed like the obvious target, given that's it's the only communication application I use that lacks a messaging menu indicator. It does have a systray icon though, so my app is probably superfluous...</p>

<h3>Anyway, to the coding!</h3>


<p>Liquid error: undefined method `join' for #&lt;String:0xb716fb04></p>

<p>The first line tell the host system to use python to interpret that file</p>

<p>The next lines import the required python modules.</p>

<p>Next, we have to define the main class and declare some variables:
Liquid error: undefined method <code>join' for #&lt;String:0xb716f8c0&gt;
This is the clas initialization function
Liquid error: undefined method</code>join' for #&lt;String:0xb716f67c>
The first line creates the skype API instance, after which we call the loadSkype() function, which checks if skype is loaded and if not, starts it. We'll look at that function later on.
Next, we create the notification server instance, choose an icon, connect the function server_display to the server-display event (when the icon is clicked on) and finally run the create_indicators function that looks for skype messages and displays them accordingly.</p>

<p>Liquid error: undefined method `join' for #&lt;String:0xb716f410></p>

<p>This basically tries to start skype if it is not already started and calls noSkype() if it couldn't start it. noSype() shows a notification message to let the user know that they have to start Skype.
<a href="http://cdn.jfoucher.com/uploads/2011/01/skype-not-started.png"><img src="http://cdn.jfoucher.com/uploads/2011/01/skype-not-started.png" alt="Error shown if Skype is not running" title="skype-not-started" width="428" height="213" class="aligncenter size-full wp-image-256" /></a></p>

<p>This next function is where the meat of the process takes place. Please read the inline comments to understand how it works, and ask for clarification by <a href="#respond">posting a comment</a>.</p>

<p>Liquid error: undefined method `join' for #&lt;String:0xb716f1cc></p>

<p>When a new messages arrives, this is what the messaging menu looks like
<a href="http://cdn.jfoucher.com/uploads/2011/01/skype-indicator-menu.png"><img src="http://cdn.jfoucher.com/uploads/2011/01/skype-indicator-menu.png" alt="Messaging menu open qith unread messages" title="skype-indicator-menu" width="376" height="256" class="aligncenter size-full wp-image-258" /></a></p>

<p>The function that gets unread skype messages is as follows For each message, we add it to a list containg the messages from a particular user in the self.unread dictionary.</p>

<p>Liquid error: undefined method `join' for #&lt;String:0xb716ef24></p>

<p>The next two functions are in charge of getting the skype user username as well as the friendliest name available.</p>

<p>Liquid error: undefined method `join' for #&lt;String:0xb716ecb8></p>

<p>Below is the generic function in charge of showing popup notifications.</p>

<p>Liquid error: undefined method `join' for #&lt;String:0xb716ea74></p>

<p>This is what it looks like with three new messages
<a href="http://cdn.jfoucher.com/uploads/2011/01/skype-indicator.png"><img src="http://cdn.jfoucher.com/uploads/2011/01/skype-indicator.png" alt="The Ubuntu skype indicator with three new messages" title="skype-indicator" width="428" height="232" class="aligncenter size-full wp-image-253" /></a></p>

<p>The next one shows the popup notification that skype is not loaded :
Liquid error: undefined method `join' for #&lt;String:0xb716e7f4></p>

<p>And finally, the indicator events callbacks (what happens when we click on the skype indicator, or on a particular message</p>

<p>Liquid error: undefined method `join' for #&lt;String:0xb716e510></p>

<p>At the end of the file, we start everything :</p>

<p>Liquid error: undefined method `join' for #&lt;String:0xb716e2cc></p>

<p>And finally, here is the complete source code :</p>

<p>Liquid error: undefined method `join' for #&lt;String:0xb716e088></p>

<p>Download the script, or fork it on the <a href="https://github.com/jfoucher/ubuntu-skype-indicator">ubuntu-skype-indicator github repository</a></p>

<p>UPDATE: Before you run this script, you need to install its dependencies, python-indicate and skype4py
On ubuntu, it's as simple as running Liquid error: undefined method `join' for "sudo apt-get install python-skype python-indicate":String</p>



                <div id="disqus_thread"></div>
                <script type="text/javascript">
                    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                    var disqus_shortname = 'geekynuggets'; // required: replace example with your forum shortname

                    /* * * DON'T EDIT BELOW THIS LINE * * */
                    (function() {
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
            </div> <!-- /.entry-content.colEight -->
            <div class="page-nav-bottom">
                
				    <span class="page-nav-item page-prev"><a class="internal" rel="prev"  href="/2011/01/compile-custom-kernel-on-ubuntu-10-10.html#notebook" title="Read Compile custom kernel on Ubuntu 10.10">&larr; View previous article</a></span>
				
				
				    <span class="page-nav-item page-next"><a class="internal" rel="next"  href="/2011/01/spanish-characters-on-qwerty-keyboard-for-ubuntu-10-10.html#notebook" title="Read Spanish characters on Qwerty keyboard for Ubuntu 10.10">View next article &rarr;</a></span>
                
            </div> <!-- /.page-nav-bottom -->
        </div> <!-- /#notebook.center.clear -->
            <footer id="footer" class="clear">
        <span class="backtop"><a class="internal" href="#header" title="Return to the top of this page">Back to top &uarr;</a></span>
        <nav>
            <ul id="nav-footer">
                <li><a href="/about.html" title="About &amp; contact information" tabindex="0">About <span class="amp">&amp;</span> Contact</a></li>
                <li><a href="/archives.html#cover" title="View the blog archives" tabindex="0">Archives</a></li>
                <li><a href="/projects/#notebook" title="Go to the code portfolio of Jonathan Foucher" tabindex="0">Projects</a></li>
                <li><a href="http://feeds.feedburner.com/GeekyNuggets" title="Feed link" tabindex="0">Feed</a></li>
            </ul>
        </nav>

        <div class="page-meta clear">
            <div class="info">

                <p class="copyright ">
                    This blog has been online in one form or another since
                    <span class="date" title="March 2004">2004</span><br />Copyright &copy; <a href="http://jfoucher.com">Jonathan
                    Foucher.</a><br /><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"
                       title="You can use this for non-comercial purposes, provided you cite me as the author, and do not modify the content">
                        Creative Commons License
                    </a>.
                </p>
            </div>

        </div> <!-- /.page-meta.clear -->
    </footer> <!-- /#footer.center.clear -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8465441-2']);
    _gaq.push(['_trackPageview']);



    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') +
        '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    </script>
            
    <!-- Piwik -->
    <script type="text/javascript">
    var pkBaseURL = (("https:" == document.location.protocol) ? "https://stats.6px.eu/" : "http://stats.6px.eu/");
    document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
    </script><script type="text/javascript">
    try {
    var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
    piwikTracker.trackPageView();
    piwikTracker.enableLinkTracking();
    } catch( err ) {}
    </script><noscript><p><img src="http://stats.6px.eu/piwik.php?idsite=1" style="border:0" alt="" /></p></noscript>
    <!-- End Piwik Tracking Code -->

</body>
</html>
	</div>
