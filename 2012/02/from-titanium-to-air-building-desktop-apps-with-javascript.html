<!DOCTYPE html> 
<html lang="en">
<!--
	Access keys:
		H = homepage
		S = search input field
		L = latest article on the homepage
		A = about page
-->
<head>
    <title>
        From Titanium to Adobe Air, or, Building Desktop Apps with Javascript
        
    </title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<meta http-equiv="content-language" content="en" />
	<meta name="author" content="Jonathan Foucher" />
	<meta name="designer" content="Jonathan Foucher" />
	<meta name="developer" content="Jonathan Foucher" />
	<meta name="description" content="A blog about web development, codeigniter and wordpress, by web developer Jonathan Foucher" />
	<meta name="keywords" content="Web development, france, wordpress, codeigniter, linux, ubuntu, debian, system administration" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
	<link rel="license" href="http://creativecommons.org/licenses/by-nc-nd/2.5/en/" />
    <link href='http://fonts.googleapis.com/css?family=Questrial' rel='stylesheet' type='text/css'>
	<!--<link rel="stylesheet" href="/assets/css/screen.css" type="text/css" media="screen" />-->

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>

    <script src="/assets/js/jquery.timeago.js" type="text/javascript"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
    <link rel="stylesheet" href="/assets/css/screen.css" type="text/css" media="screen" />
    <script src="/assets/js/less-1.1.4.js" type="text/javascript"></script>
    <!--[if lt IE 9]>
    <script type="text/javascript" src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <script type="text/javascript" src="http://www.shrinktheweb.com/scripts/pagepix.js"></script>
	<link rel="alternate" href="http://feeds.feedburner.com/GeekyNuggets" title="Geeky Nuggets" type="application/atom+xml" />

	<link rel="shortcut icon" type="image/png" href="/favicon.png" />

</head>
<body>


	<div id="container" class="clearfix">
		                <header id="header" class="center">
            <div class="logo">
                <a href="/" title="Return to homepage" tabindex="0" accesskey="H">
                    Geeky Nuggets
                </a>
            </div>
            <div class="siteDesc"><a href="/about.html#notebook" title="About Jonathan Foucher
                &amp; contact details" tabindex="0" accesskey="A">Jonathan Foucher</a>&rsquo;s blog <span
                class="amp">&amp;</span> web development
                notebook.
            </div>
                    <nav id="nav" class="clear">
            <ul class="nav nav-header caps">
				<li><a href="/about.html#notebook" title="About &amp; contact information" tabindex="0">About <span class="amp">&amp;</span> Contact</a></li>
				<li class="active"><a href="/archives.html#cover" title="View the blog archives" tabindex="0">Archives</a></li>
				<li><a href="/projects/#notebook" title="Go to the code portfolio of Jonathan Foucher" tabindex="0">Projects</a></li>
				<li><a href="http://feeds.feedburner.com/GeekyNuggets" title="Subscribe to my posts, by email or in your feed reader" tabindex="0">Feed</a></li>
            </ul>
			<div class="sitesearch">

                <!-- Google Custom Search Element -->
                <!--<form action="http://www.google.com/cse" class="center_column" id="searchForm" >
                    <fieldset>
                       <input type="hidden" name="cx" value="004905032692135561336:flcwnz7i1ww" />
                       <input type="hidden" name="ie" value="UTF-8" />
                       <label for="search" class="hidden">Search</label>
                       <input id="search" class="text-input" type="text" name="q" size="15" tabindex="0" accesskey="S" />
                       <input id="searchsubmit" type="submit" name="sa" value="Search" tabindex="0" />
                    </fieldset>
                </form>-->

            </div>

        </nav> <!-- /#nav.clear -->


            
		</header> <!-- /#header.center -->


		<div id="notebook" class="center clear">
			<div class="page-nav-top">
                
				    <span class="page-nav-item page-prev"><a class="internal" rel="prev"  href="/2011/12/implementing-browserid-identification.html#notebook" title="View Implementing BrowserID identification on your website">&larr; View previous article</a></span>
				
				
            </div> <!-- /.page-nav-top -->

             <h2 class="post-title">
                <a href="/2012/02/from-titanium-to-air-building-desktop-apps-with-javascript.html#notebook" title="Permanent link to From Titanium to Adobe Air, or, Building Desktop Apps with Javascript">
                    From Titanium to Adobe Air, or, Building Desktop Apps with Javascript
                </a>
            </h2>

            <div class="meta">
                <div class="hero">

                    <p>
                        
                    </p>
                </div>
                <!-- <span class="pdf">Download a <a href="/2012/02/from-titanium-to-air-building-desktop-apps-with-javascript.html.pdf" title="Download a PDF, printer-friendly copy of this article"><acronym title="Portable Document Format">PDF</acronym>, printer-friendly version of this article</a>.</span> -->
                <span class="permalink">For referencing: <a href="/2012/02/from-titanium-to-air-building-desktop-apps-with-javascript.html" title="[Permalink] From Titanium to Adobe Air, or, Building Desktop Apps with Javascript">permalink to this article</a>.</span>
                    <span class="date" title="2012-02-13T00:00:00+01:00">
                    <span class="published">Published&thinsp;&bull;</span>
                    <span class="day">13</span>
                    <span class="month"><abbr>Feb</abbr></span>
                    <span class="year">2012</span>
                </span>
                <div class="share">
                    <a href="https://twitter.com/share" class="twitter-share-button" data-via="jfoucher">Tweet</a>
                    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

                </div>
            </div> <!-- /.meta -->
            <div id="entry-content">

                <p><a href="http://vessenger.com">Vessenger</a> is an app that allows closed groups such as
organizations, to chat and send documents to each other or to a central
repository. People can be divided in groups so that they can share status
updates or documents with just the required people. In some ways it is similar
to yammer, but was to be based primarily on a desktop app.</p>

<h3>We decide to use Titanium</h3>

<p>After some brainstorming with the company owner, we decided that we'd make the
app available cross platform, and at least for Mac OSX and Windows. I
personally use Linux, so I also wanted to make sure that it would work on Linux
as well.  Developping two or three native apps was not a viable option, so we
decided to use a framework that would allow us to use HTML and Javascript, such
as Titanium and Adobe Air. Titanium looked like it had great support from the
community, is Open source and actively developped, so we went with that.</p>

<p>Developing in Titanium takes some getting used to, but is not much different to
building javascript heavy web applications. Initially, an index.html file is
loaded by Titanium, in which we load all the required javascript files. At
first I had everything in one big and quickly growing javascript file, which
although properly namespaced, was really giving me headaches just to move
around. So I split it up in several smaller files, by functionality, as I
should have done since the beginning.</p>

<p>Working in Titanium can be frustrating at times, and although it works pretty
well, I had to spend a lot of time looking through the documentation. After
some time, I realized that the docs for Tianium are not easy to understand, not
particularly friendly and sometimes even incomplete.</p>

<p>I started working on <a href="http://vessenger.com">Vessenger</a> by doing most of the UI,
the status message sending and retrieving, and getting a basic version of the
chat feature working for demo purposes. The status updates was the easiest one
to build, and I added the possibility to upload files within you status update.
They can be any type of files, with images showing a thumbnail when seen by
your colleagues. All the files live on <a href="http://vessenger.com">Vessenger</a>'s
servers, which makes it very easy to retrieve information at a later date, just
by looking at your (infinite) chat or status history.</p>

<h3>Switching to Adobe Air</h3>

<p>I then started working on the chat feature, which is where we noticed an issue
with the repeated server polling we were doing: as well as being suboptimal on
the server side, the was also a memory leak on the client side, which seemd to
be caused by Titanium not properly closing and/or releasing the connection
object, a problem compouded by the fact that Titanium has no method for
explicitely closing a remote connection. As I was connecting to the server
several times per second, the memory footprint of the application grew fairly
quickly. After a lot a frustration trying to make it right, we decided the
problem lay with Titanium and decided to switch to Adobe Air. Regretfully, the
latest Air version is not supported on Linux anymore, but it's possible to make
the app the app compatible with Air 2.6 to get it to run properly on linux.</p>

<blockquote><p>The memory used by the app could climb to 600Mb overnight...</p></blockquote>

<p>The switch to Adobe air did not involve the complete rewrite I feared, as most
of the code is compatible and I had created some abstractions for things like
connecting to the API and storing data. Nevertheless, EncryptedLocalStorage is
great: very easy to use and has all the features needed. My only problem with
Adobe Air was the way it handled cookies: it basically did not, so I had to
create that from scratch, storing the cookies in EcryptedLocalStorage and
sending it explicitely with each and every request. In hindsight I should have
setup a dedicated server with node.js to talk to the API, and socket.io to talk
between the desktop app and the node server. I am actually implementing this
solution now for another project and I think it would be a perfect fit for
<a href="http://vessenger.com">Vessenger</a> as well.</p>

<h3>Sort issues caused by Titanium</h3>

<p>So by a combination of moving to Air and reducing the polling frequency for the
things that did not need to be refreshed so often, I managed to eliminate the
memory leak. Development could then continue as previously planned: I
integrated <a href="http://vessenger.com/snaplr">Snaplr</a> in the file upload dialogs,
allowing the user to easily take a screenshot, annotate it and upload it along
along with his message, to be seen instantly by the people he is chatting with.
For me this is one of the killer features of <a href="http://vessenger.com">Vessenger</a></p>




                <div id="disqus_thread"></div>
                <script type="text/javascript">
                    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                    var disqus_shortname = 'geekynuggets'; // required: replace example with your forum shortname

                    /* * * DON'T EDIT BELOW THIS LINE * * */
                    (function() {
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
            </div> <!-- /.entry-content.colEight -->
            <div class="page-nav-bottom">
                
				    <span class="page-nav-item page-prev"><a class="internal" rel="prev"  href="/2011/12/implementing-browserid-identification.html#notebook" title="Read Implementing BrowserID identification on your website">&larr; View previous article</a></span>
				
				
            </div> <!-- /.page-nav-bottom -->
        </div> <!-- /#notebook.center.clear -->
            <footer id="footer" class="clear">
        <span class="backtop"><a class="internal" href="#header" title="Return to the top of this page">Back to top &uarr;</a></span>
        <nav>
            <ul id="nav-footer">
                <li><a href="/about.html" title="About &amp; contact information" tabindex="0">About <span class="amp">&amp;</span> Contact</a></li>
                <li><a href="/archives.html#cover" title="View the blog archives" tabindex="0">Archives</a></li>
                <li><a href="/projects/#notebook" title="Go to the code portfolio of Jonathan Foucher" tabindex="0">Projects</a></li>
                <li><a href="http://feeds.feedburner.com/GeekyNuggets" title="Feed link" tabindex="0">Feed</a></li>
            </ul>
        </nav>

        <div class="page-meta clear">
            <div class="info">

                <p class="copyright ">
                    This blog has been online in one form or another since
                    <span class="date" title="March 2004">2004</span><br />Copyright &copy; <a href="http://jfoucher.com">Jonathan
                    Foucher.</a><br /><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"
                       title="You can use this for non-comercial purposes, provided you cite me as the author, and do not modify the content">
                        Creative Commons License
                    </a>.
                </p>
            </div>

        </div> <!-- /.page-meta.clear -->
    </footer> <!-- /#footer.center.clear -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8465441-2']);
    _gaq.push(['_trackPageview']);



    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') +
        '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    </script>
            
    <!-- Piwik -->
    <script type="text/javascript">
    var pkBaseURL = (("https:" == document.location.protocol) ? "https://stats.6px.eu/" : "http://stats.6px.eu/");
    document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
    </script><script type="text/javascript">
    try {
    var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
    piwikTracker.trackPageView();
    piwikTracker.enableLinkTracking();
    } catch( err ) {}
    </script><noscript><p><img src="http://stats.6px.eu/piwik.php?idsite=1" style="border:0" alt="" /></p></noscript>
    <!-- End Piwik Tracking Code -->

</body>
</html>
	</div>
