<!DOCTYPE html> 
<html lang="en">
<!--
	Access keys:
		H = homepage
		S = search input field
		L = latest article on the homepage
		A = about page
-->
<head>
    <title>
        Installing PHP, Apache2 and nginx for faster websites
        
    </title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<meta name="author" content="Jonathan Foucher" />
	<meta name="designer" content="Jonathan Foucher" />
	<meta name="developer" content="Jonathan Foucher" />
	<meta name="description" content="I recently decided to go with a small VPS for some of my sites, and to get decent performance without too much work I used Nginx as a proxy to Apache2" />
	<meta name="keywords" content="Web development, france, wordpress, codeigniter, linux, ubuntu, debian, system administration" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
	<link rel="license" href="http://creativecommons.org/licenses/by-nc-nd/2.5/en/" />
    <link href="http://tent.jfoucher.com/profile" rel="https://tent.io/rels/profile" />
    <link href='http://fonts.googleapis.com/css?family=Questrial' rel='stylesheet' type='text/css'>
	<!--<link rel="stylesheet" href="/assets/css/screen.css" type="text/css" media="screen" />-->

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>

	<script type="text/javascript" src="/assets/js/app.js"></script>
    <link rel="stylesheet" href="/assets/css/screen.css" type="text/css" media="screen" />
    <!--[if lt IE 9]>
    <script type="text/javascript" src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <script type="text/javascript" src="http://www.shrinktheweb.com/scripts/pagepix.js"></script>
	<link rel="alternate" href="http://feeds.feedburner.com/GeekyNuggets" title="Geeky Nuggets" type="application/atom+xml" />

	<link rel="shortcut icon" type="image/png" href="/favicon.png" />

</head>
<body>


	<div id="container" class="clearfix">
		                <header id="header" class="center">
            <div class="logo">
                <a href="/" title="Return to homepage" tabindex="0" accesskey="H">
                    Geeky Nuggets
                </a>
            </div>
            <div class="siteDesc"><a href="/about.html" title="About Jonathan Foucher
                &amp; contact details" tabindex="0" accesskey="A">Jonathan Foucher</a>&rsquo;s blog <span
                class="amp">&amp;</span> web development
                notebook.
            </div>
                    <nav id="nav" class="clear">
            <ul class="nav nav-header caps">
				<li><a href="/about.html" title="About &amp; contact information" tabindex="0">About <span class="amp">&amp;</span> Contact</a></li>
				<li class="active"><a href="/archives.html" title="View the blog archives" tabindex="0">Archives</a></li>

				<li><a href="http://feeds.feedburner.com/GeekyNuggets" title="Subscribe to my posts, by email or in your feed reader" tabindex="0">Feed</a></li>
            </ul>
			<div class="sitesearch">

                <!-- Google Custom Search Element -->
                <!-- <form action="http://www.google.com/cse" class="center_column" id="searchForm" >
                    <fieldset>
                       <input type="hidden" name="cx" value="004905032692135561336:flcwnz7i1ww" />
                       <input type="hidden" name="ie" value="UTF-8" />
                       <label for="search" class="hidden">Search</label>
                       <input id="search" class="text-input" type="text" name="q" size="15" tabindex="0" accesskey="S" />
                       <input id="searchsubmit" type="submit" name="sa" value="Search" tabindex="0" />
                    </fieldset>
                </form>-->

            </div>

        </nav> <!-- /#nav.clear -->


            
		</header> <!-- /#header.center -->


		<div id="notebook" class="center clear">
			<div class="page-nav-top">
                
				    <span class="page-nav-item page-prev"><a class="internal" rel="prev"  href="/2012/04/getting-your-users-gmail-contacts.html" title="View Import contacts from Google by entering your email and password">&larr; View previous article</a></span>
				
				
				    <span class="page-nav-item page-next"><a class="internal" rel="next"  href="/2013/05/building-and-using-minimalist-running-shoes.html" title="View How I built running shoes for my whole family in one sunday afternoon (Huarache sandals)">View next article &rarr;</a></span>
                
            </div> <!-- /.page-nav-top -->

             <h2 class="post-title">
                <a href="/2012/04/installing-apache-php-and-nginx-for-faster-websites.html" title="Permanent link to Installing PHP, Apache2 and nginx for faster websites">
                    Installing PHP, Apache2 and nginx for faster websites
                </a>
            </h2>

            <div class="meta">
                <div class="hero">

                    <p>
                        I recently decided to go with a small VPS for some of my sites, and to get decent performance without too much work I used Nginx as a proxy to Apache2
                    </p>
                </div>
                <!-- <span class="pdf">Download a <a href="/2012/04/installing-apache-php-and-nginx-for-faster-websites.html.pdf" title="Download a PDF, printer-friendly copy of this article"><acronym title="Portable Document Format">PDF</acronym>, printer-friendly version of this article</a>.</span> -->
                <span class="permalink">For referencing: <a href="/2012/04/installing-apache-php-and-nginx-for-faster-websites.html" title="[Permalink] Installing PHP, Apache2 and nginx for faster websites">permalink to this article</a>.</span>
                    <span class="date" title="Mon Apr 23 08:17:07 +0200 2012">
                    <span class="published">Published&thinsp;&bull;</span>
                    <span class="day">23</span>
                    <span class="month"><abbr>Apr</abbr></span>
                    <span class="year">2012</span>
                </span>
                <div class="share">
                    <div class="iframes">
                        <a href="https://twitter.com/share" class="twitter-share-button" data-via="jfoucher">Tweet</a>
                        
<iframe scrolling="no" height="28px" width="115px" src="http://hnlike.com/upvote.php?link=http%3A%2F%2Fjfoucher.com/2012/04/installing-apache-php-and-nginx-for-faster-websites.html&amp;title=Installing PHP, Apache2 and nginx for faster websites">
    <a href="http://hnlike.com/upvote.php?link=http%3A%2F%2Fjfoucher.com/2012/04/installing-apache-php-and-nginx-for-faster-websites.html&amp;title=Installing PHP, Apache2 and nginx for faster websites">upvote on HN</a>
</iframe>


                        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

                    </div>
                </div>
            </div> <!-- /.meta -->
            <div id="entry-content">

                <p>My contract with my previous shared hosting contractor is coming to a close, and as they seem to have all but abandoned their business, I decided it was time to move away. I looked at using Amazon&#8217;s EC2, but ultimately decided to go with Bhost, with which I&#8217;m fairly happy so far. To get some decent performance out of it, I planned to use Nginx as my web server</p>

<h3 id='keep_using_apache_as_usual'>Keep using Apache as usual</h3>

<p>All my websites are configured to work with apache, sometimes using fairly advanced rewrite rules, and a fair proportion of wordpress sites. So to save myself a ton of work I decided to just use Nginx as a proxy to apache and not reconfigure each site to use Nginx&#8217;s rewrite rules.</p>

<h3 id='install_required_software'>Install required software</h3>

<p>I&#8217;m using Ubuntu, but the steps below should be fairly easy to adapt to your distribution of choice. To install everything from scratch, just run <code>sudo apt-get install php5 apache2 mysql-server php5-mysql nginx</code>. This installs mysql, Apache, PHP and Nginx</p>

<h3 id='configure_apache_and_nginx'>Configure Apache and Nginx</h3>

<p>I created one bash script that creates the necessary virtual hosts files for Apache and Nginx, by taking a template a doing a search/replace with sed. Here is the apache virtual host template that goes into <code>/etc/apache2/sites-available</code>:</p>
<div class='highlight'><pre><code class='apache'>    <span class='err'>&amp;lt;</span><span class='nb'>VirtualHost</span> \*:8080&amp;gt;
        <span class='nb'>ServerAdmin</span> webmaster@localhost
        <span class='nb'>ServerName</span> template
        <span class='nb'>ServerAlias</span> template www.template cdn.template cdn2.template
        <span class='nb'>DocumentRoot</span> <span class='sx'>/var/www/template</span>
        <span class='err'>&amp;lt;</span><span class='nb'>Directory</span> /&amp;gt;
                <span class='nb'>Options</span> FollowSymLinks
                <span class='nb'>AllowOverride</span> <span class='k'>None</span>
        <span class='err'>&amp;lt;/Directory&amp;gt;</span>
        <span class='err'>&amp;lt;</span><span class='nb'>Directory</span> <span class='sx'>/var/www/template/</span>&amp;gt;
                <span class='nb'>Options</span> Indexes FollowSymLinks MultiViews
                <span class='nb'>AllowOverride</span> <span class='k'>All</span>
                <span class='nb'>Order</span> allow,deny
                <span class='nb'>allow</span> from <span class='k'>all</span>
        <span class='err'>&amp;lt;/Directory&amp;gt;</span>
        <span class='nb'>ScriptAlias</span> <span class='sx'>/cgi-bin/</span> <span class='sx'>/usr/lib/cgi-bin/</span>
        <span class='err'>&amp;lt;</span><span class='nb'>Directory</span> <span class='s2'>&quot;/usr/lib/cgi-bin&quot;</span>&amp;gt;
                <span class='nb'>AllowOverride</span> <span class='k'>None</span>
                <span class='nb'>Options</span> +ExecCGI -MultiViews +SymLinksIfOwnerMatch
                <span class='nb'>Order</span> allow,deny
                <span class='nb'>Allow</span> from <span class='k'>all</span>
        <span class='err'>&amp;lt;/Directory&amp;gt;</span>
        <span class='nb'>ErrorLog</span> ${APACHE_LOG_DIR}/error.log
        <span class='c'># Possible values include: debug, info, notice, warn, error, crit,</span>
        <span class='c'># alert, emerg.</span>
        <span class='nb'>LogLevel</span> <span class='k'>warn</span>
        <span class='nb'>CustomLog</span> ${APACHE_LOG_DIR}/access.log combined
        <span class='nb'>Alias</span> <span class='sx'>/doc/</span> <span class='s2'>&quot;/usr/share/doc/&quot;</span>
        <span class='err'>&amp;lt;</span><span class='nb'>Directory</span> <span class='s2'>&quot;/usr/share/doc/&quot;</span>&amp;gt;
            <span class='nb'>Options</span> Indexes MultiViews FollowSymLinks
            <span class='nb'>AllowOverride</span> <span class='k'>None</span>
            <span class='nb'>Order</span> deny,allow
            <span class='nb'>Deny</span> from <span class='k'>all</span>
            <span class='nb'>Allow</span> from <span class='m'>127.0.0.0/255</span>.0.0.0 ::1/128
        <span class='err'>&amp;lt;/Directory&amp;gt;</span>
    <span class='err'>&amp;lt;/VirtualHost&amp;gt;</span>
</code></pre></div>
<p>You&#8217;ll notice that Apache listens on port 8080. You need to change the port from 80 to 8080 in <code>/etc/apache2/ports.conf</code> as well, this is what mine looks like after the change :</p>
<div class='highlight'><pre><code class='apache'>    <span class='nb'>NameVirtualHost</span> \*:8080
    <span class='nb'>Listen</span> <span class='m'>8080</span>
    <span class='err'>&amp;lt;</span><span class='nb'>IfModule</span> mod_ssl.c&amp;gt;
        <span class='c'># If you add NameVirtualHost \*:443 here, you will also have to change</span>
        <span class='c'># the VirtualHost statement in /etc/apache2/sites-available/default-ssl</span>
        <span class='c'># to &amp;lt;VirtualHost \*:443&amp;gt;</span>
        <span class='c'># Server Name Indication for SSL named virtual hosts is currently not</span>
        <span class='c'># supported by MSIE on Windows XP.</span>
        <span class='nb'>Listen</span> <span class='m'>443</span>
    <span class='err'>&amp;lt;/IfModule&amp;gt;</span>
    <span class='err'>&amp;lt;</span><span class='nb'>IfModule</span> mod_gnutls.c&amp;gt;
        <span class='nb'>Listen</span> <span class='m'>443</span>
    <span class='err'>&amp;lt;/IfModule&amp;gt;</span>
</code></pre></div>
<p>Next up is the template for the default nginx site, which is much simpler and goes in <code>/etc/nginx/sites-available</code>:</p>
<div class='highlight'><pre><code class='nginx'>    <span class='k'>server</span> <span class='p'>{</span>
        <span class='kn'>listen</span> <span class='mi'>80</span><span class='p'>;</span>
        <span class='kn'>access_log</span> <span class='s'>/var/log/nginx.access.log</span><span class='p'>;</span>
        <span class='kn'>error_log</span> <span class='s'>/var/log/nginx.error.log</span><span class='p'>;</span>
        <span class='kn'>root</span> <span class='s'>/var/www/template</span><span class='p'>;</span>
        <span class='kn'>index</span> <span class='s'>index.php</span> <span class='s'>index.html</span><span class='p'>;</span>
        <span class='kn'>server_name</span> <span class='s'>template</span> <span class='s'>\*.template</span><span class='p'>;</span>
        <span class='kn'>location</span> <span class='s'>/</span> <span class='p'>{</span>
                <span class='kn'>proxy_set_header</span> <span class='s'>X-Real-IP</span> <span class='nv'>$remote_addr</span><span class='p'>;</span>
                <span class='kn'>proxy_set_header</span> <span class='s'>X-Forwarded-For</span> <span class='nv'>$proxy_add_x_forwarded_for</span><span class='p'>;</span>
                <span class='kn'>proxy_set_header</span> <span class='s'>Host</span> <span class='nv'>$host</span><span class='p'>;</span>
                <span class='kn'>proxy_pass</span> <span class='s'>http://127.0.0.1:8080</span><span class='p'>;</span>
        <span class='p'>}</span>
        <span class='kn'>location</span> <span class='p'>~</span> <span class='sr'>/\.(ht|git)</span> <span class='p'>{</span>
                <span class='kn'>deny</span> <span class='s'>all</span><span class='p'>;</span>
        <span class='p'>}</span>
    <span class='p'>}</span>
</code></pre></div>
<p>All that does is proxy everything to apache on localhost, port 8080</p>

<p>So, our virtual host templates are ready, and if you only have one or two sites you could copy the contents to a new file by hand and change the word <code>template</code> for your actual domain name / folder, but as I had quite a few sites to convert, I created a small bash script that takes car of it for me, by just calling it with the hostname:</p>
<div class='highlight'><pre><code class='bash'>    <span class='c'>#!/bin/bash</span>
    <span class='nv'>CMDLN_ARGS</span><span class='o'>=</span><span class='s2'>&quot;$@&quot;</span> <span class='c'># Command line arguments for this script</span>
    <span class='nb'>export </span>CMDLN_ARGS
    <span class='c'># Run this script as root if not already.</span>
    chk_root <span class='o'>()</span> <span class='o'>{</span>
     <span class='k'>if</span> <span class='o'>[</span> ! <span class='k'>$(</span> id -u <span class='k'>)</span> -eq 0 <span class='o'>]</span>; <span class='k'>then</span>
<span class='k'>       </span><span class='nb'>echo</span> <span class='s2'>&quot;Please enter your password.&quot;</span>
       <span class='nb'>exec </span>sudo su -c <span class='s2'>&quot;${0} ${CMDLN_ARGS}&quot;</span> <span class='c'># Call this prog as root</span>
       <span class='nb'>exit</span> <span class='k'>${</span><span class='p'>?</span><span class='k'>}</span>  <span class='c'># since we&#39;re &#39;execing&#39; above, we wont reach this exit</span>
                  <span class='c'># unless something goes wrong.</span>
     <span class='k'>fi</span>
    <span class='o'>}</span>
    chk_root
    cat /etc/apache2/sites-available/template | sed <span class='s2'>&quot;s/template/$1/g&quot;</span> |cat &amp;gt; /etc/apache2/sites-available/<span class='nv'>$1</span>
    ln -s /etc/apache2/sites-available/<span class='nv'>$1</span> /etc/apache2/sites-enabled/<span class='nv'>$1</span>
    cat /etc/nginx/sites-available/template | sed <span class='s2'>&quot;s/template/$1/g&quot;</span> |cat &amp;gt; /etc/nginx/sites-available/<span class='nv'>$1</span>
    ln -s /etc/nginx/sites-available/<span class='nv'>$1</span> /etc/nginx/sites-enabled/<span class='nv'>$1</span>
    <span class='k'>if</span> <span class='o'>[</span> -d /var/www/<span class='nv'>$1</span> <span class='o'>]</span>;
    <span class='k'>then</span>
<span class='k'>      </span><span class='nb'>echo</span> <span class='s2'>&quot;host directory exists&quot;</span>;
    <span class='k'>else</span>
<span class='k'>      </span><span class='nb'>echo</span> <span class='s2'>&quot;creating directory&quot;</span>
      mkdir <span class='s2'>&quot;/var/www/$1&quot;</span>
    <span class='k'>fi</span>
<span class='k'>    </span>chown -R www-data:www-data /var/www/<span class='nv'>$1</span>
    /etc/init.d/apache2 restart
    /etc/init.d/nginx restart
</code></pre></div>
<p>Put this say in your home folder and give it executable permission with <code>chmod 755 new_host</code> or whatever you named the file.</p>

<p>Then run it with <code>./new_host example.com</code></p>

<p>This will create a folder in <code>/var/www/example.com</code>, copy the updated template virtual host configuration to the required location and restart apache and nginx.</p>

<p>Now put some content in that folder and configure your mysql connection if neccesary</p>

<p>You should now be able to browse to example.com and see your brand new site. Some quick benchmarking with ab gives roughly a tenfold increase in requests per second, depending on the configuration of the website itself</p>

<p>These are some rough numbers for <a href='http://6px.eu'>Six Pixels</a>, built with Kohana2 without any caching mechanism</p>

<p><code>ab -c20 -n200 http://6px.eu:8080/</code> is hitting Apache on port 8080</p>

<pre><code>Server Hostname:        6px.eu
Server Port:            8080

Document Path:          /
Document Length:        12101 bytes

Concurrency Level:      20
Time taken for tests:   282.679 seconds
Complete requests:      200
Failed requests:        0
Write errors:           0
Total transferred:      2486000 bytes
HTML transferred:       2420200 bytes
Requests per second:    0.71 [#/sec] (mean)
Time per request:       28267.940 [ms] (mean)
Time per request:       1413.397 [ms] (mean, across all concurrent requests)
Transfer rate:          8.59 [Kbytes/sec] received</code></pre>

<p>Now with nginx <code>ab -c20 -n200 http://6px.eu/</code></p>

<pre><code>Server Hostname:        6px.eu
Server Port:            80

Document Path:          /
Document Length:        12081 bytes

Concurrency Level:      20
Time taken for tests:   40.606 seconds
Complete requests:      200
Failed requests:        0
Write errors:           0
Total transferred:      2482000 bytes
HTML transferred:       2416200 bytes
Requests per second:    4.93 [#/sec] (mean)
Time per request:       4060.612 [ms] (mean)
Time per request:       203.031 [ms] (mean, across all concurrent requests)
Transfer rate:          59.69 [Kbytes/sec] received</code></pre>

<h3 id='update'>Update:</h3>

<p>As rightly noted by <a href='https://twitter.com/#!/arnaud_lb/status/196610128261296129'>@arnaud_lb</a> the benchmarks should give nearly the same results, as nginx is waiting for Apache to return it&#8217;s data before sending it along. What happened in those benchmarks is that <a href='http://cloudflare.com'>cloudflare.com</a> (highly recommended by the way) was caching some results and not others.</p>

<p>When I tried on localhost, the results were effectively the same. So the way to get better performance is to get nginx to cache the results from apache, by adding the following to your nginx virtual host definition :</p>
<div class='highlight'><pre><code class='nginx'>    <span class='k'>proxy_cache</span> <span class='no'>on</span><span class='s'>e</span><span class='p'>;</span>
    <span class='k'>proxy_cache_use_stale</span> <span class='s'>error</span> <span class='s'>timeout</span> <span class='s'>invalid_header</span> <span class='s'>updating</span><span class='p'>;</span>
    <span class='k'>proxy_cache_key</span> <span class='nv'>$scheme$host$request_uri</span><span class='p'>;</span>
    <span class='k'>proxy_cache_valid</span>       <span class='mi'>200</span> <span class='mi'>301</span> <span class='mi'>302</span> <span class='mi'>20m</span><span class='p'>;</span>
    <span class='k'>proxy_cache_valid</span>       <span class='mi'>404</span> <span class='mi'>1m</span><span class='p'>;</span>
    <span class='k'>proxy_cache_valid</span>       <span class='s'>any</span> <span class='mi'>15m</span><span class='p'>;</span>
</code></pre></div>
<p>where the <code>proxy_cache</code> named <code>one</code> is defined in nginx.conf as such :</p>
<div class='highlight'><pre><code class='nginx'>    <span class='k'>proxy_cache_path</span> <span class='s'>/usr/local/nginx/proxy</span> <span class='s'>levels=1:2</span> <span class='s'>keys_zone=one:15m</span> <span class='s'>inactive=7d</span> <span class='s'>max_size=1000m</span><span class='p'>;</span>
</code></pre></div>
<p>The <code>proxy_cache_valid</code> entries above define different cache times for various response codes</p>

<p>And here are the real benchmarks :</p>

<h4 id='apache'>Apache:</h4>

<pre><code>Server Hostname:        direct.6px.eu
Server Port:            8080

Document Path:          /
Document Length:        11487 bytes

Concurrency Level:      10
Time taken for tests:   15.082 seconds
Complete requests:      200
Failed requests:        0
Write errors:           0
Total transferred:      2338600 bytes
HTML transferred:       2297400 bytes
Requests per second:    13.26 [#/sec] (mean)
Time per request:       754.075 [ms] (mean)
Time per request:       75.408 [ms] (mean, across all concurrent requests)
Transfer rate:          151.43 [Kbytes/sec] received</code></pre>

<h4 id='nginx'>Nginx:</h4>

<pre><code>Server Hostname:        direct.6px.eu
Server Port:            80

Document Path:          /
Document Length:        3031 bytes

Concurrency Level:      10
Time taken for tests:   0.027 seconds
Complete requests:      200
Failed requests:        0
Write errors:           0
Total transferred:      654600 bytes
HTML transferred:       606200 bytes
Requests per second:    7305.94 [#/sec] (mean)
Time per request:       1.369 [ms] (mean)
Time per request:       0.137 [ms] (mean, across all concurrent requests)
Transfer rate:          23351.88 [Kbytes/sec] received</code></pre>

<p>Just, wow&#8230;</p>

<p>Careful though as this will wreak havoc on your sessions, at the minimum you can disable caching for logged-in users with</p>
<div class='highlight'><pre><code class='nginx'>    <span class='k'>proxy_cache_bypass</span> <span class='nv'>$cookie_session</span><span class='p'>;</span>
    <span class='k'>proxy_no_cache</span> <span class='nv'>$cookie_session</span><span class='p'>;</span>
</code></pre></div>
<p>where <code>session</code> is the name of your cookie</p>



                <div id="disqus_thread"></div>
                <script type="text/javascript">
                    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                    var disqus_shortname = 'geekynuggets'; // required: replace example with your forum shortname

                    /* * * DON'T EDIT BELOW THIS LINE * * */
                    (function() {
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
            </div> <!-- /.entry-content.colEight -->
            <div class="page-nav-bottom">
                
				    <span class="page-nav-item page-prev"><a class="internal" rel="prev"  href="/2012/04/getting-your-users-gmail-contacts.html#notebook" title="Read Import contacts from Google by entering your email and password">&larr; View previous article</a></span>
				
				
				    <span class="page-nav-item page-next"><a class="internal" rel="next"  href="/2013/05/building-and-using-minimalist-running-shoes.html#notebook" title="Read How I built running shoes for my whole family in one sunday afternoon (Huarache sandals)">View next article &rarr;</a></span>
                
            </div> <!-- /.page-nav-bottom -->
        </div> <!-- /#notebook.center.clear -->
            <footer id="footer" class="clear">
        <span class="backtop"><a class="internal" href="#header" title="Return to the top of this page">Back to top &uarr;</a></span>
        <nav>
            <ul id="nav-footer">
                <li><a href="/about.html" title="About &amp; contact information" tabindex="0">About <span class="amp">&amp;</span> Contact</a></li>
                <li><a href="/archives.html" title="View the blog archives" tabindex="0">Archives</a></li>

                <li><a href="http://feeds.feedburner.com/GeekyNuggets" title="Feed link" tabindex="0">Feed</a></li>
            </ul>
        </nav>

        <div class="page-meta clear">
            <div class="info">

                <p class="copyright ">
                    This blog has been online in one form or another since
                    <span class="date" title="March 2004">2004</span><br />Copyright &copy; <a href="http://jfoucher.com">Jonathan
                    Foucher.</a><br /><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"
                       title="You can use this for non-comercial purposes, provided you cite me as the author, and do not modify the content">
                        Creative Commons License
                    </a>
                    <br />
                    <a href="/jfoucher-6px.eu.asc">GPG Key</a>
                </p>
            </div>

        </div> <!-- /.page-meta.clear -->
    </footer> <!-- /#footer.center.clear -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8465441-2']);
    _gaq.push(['_trackPageview']);



    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') +
        '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();


    var docHeight = document.height,
    vscroll = $(document).scrollTop();

    $(document).bind('scroll', function(){
        var docHeight = document.height,
                vscroll = $(document).scrollTop();

        if(vscroll > docHeight / 2) {
            $(document).unbind('scroll');
            _gaq.push(['_trackEvent', 'scrolled_half', 'read']);
            console.log('not a bounce')
        }
    });

    </script>

    <script type="text/javascript">
        var clicky_site_ids = clicky_site_ids || [];
        clicky_site_ids.push(100617617);
        (function() {
            var s = document.createElement('script');
            s.type = 'text/javascript';
            s.async = true;
            s.src = '//static.getclicky.com/js';
            ( document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0] ).appendChild( s );
        })();
    </script>
    <noscript><p><img alt="Clicky" width="1" height="1" src="//in.getclicky.com/100617617ns.gif" /></p></noscript>
</body>
</html>
	</div>
