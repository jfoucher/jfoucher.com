<!DOCTYPE html> 

<html lang="en">

<!-- 
	Access keys:
		H = homepage
		S = search input field
		L = latest article on the homepage
		F = portfolio
		A = about page
		
		N = next portfolio preview item
		P = previous prtoflio preview item
-->
<head>
    <title>Wordpress 404 notification by email</title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<meta http-equiv="content-language" content="en" />
	<meta name="author" content="Jonathan Foucher" />
	<meta name="designer" content="Jonathan Fouch" />
	<meta name="developer" content="Jonathan Foucher" />
	<meta name="description" content="" />
	<meta name="keywords" content="" />
	<meta name="robots" content="noydir, noopd" /> <!-- Opt out of ODP -->

	<link rel="license" href="http://creativecommons.org/licenses/by-nc-nd/2.5/en/" />
	<link rel="stylesheet" href="/assets/css/reset.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="/assets/css/screen.css" type="text/css" />
    <link rel="stylesheet" href="/assets/css/syntax.css" type="text/css" media="screen" />
	<link rel="stylesheet" href="/assets/css/print.css" type="text/css" media="print" />

	<link rel="alternate" href="http://feeds.feedburner.com/GeekyNuggets" title="Geeky Nuggets" type="application/atom+xml" />
	
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script src="/assets/js/less-1.1.4.js" type="text/javascript"></script>
    <script src="/assets/js/jquery.timeago.js" type="text/javascript"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8465441-2']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') +
        '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    </script>
</head>

<body>
	<div id="container">
		                <div id="header" class="center">
            <div class="article-logo floatLeft colFour">
                <h1>
				    <a href="/" title="Return to homepage" tabindex="0" accesskey="H">
				        <span class="hoverline">Geeky Nuggets</span>
				    </a>
                </h1>
            </div>
            <div class="hero floatRight colSix">
                <p class="moin">
                    
                    You&#8217;re currently viewing a single article. Feel free to skip back to
                    <a href="/" rel="home" title="Go back to the homepage" tabindex="0">&sect; Index</a> or straight to
                    <a href="/#notebook" title="Skip straight to the latest article" tabindex="0" accesskey="L">&sect; Latest article</a>.
                </p>
                <p>
                    
                </p>
			</div>
		</div> <!-- /#header.center -->
		        <div id="nav" class="clear">
            <ul class="nav nav-header caps">
				<li><a href="/about.html#notebook" title="About &amp; contact information" tabindex="0">About <span class="amp">&amp;</span> Contact</a></li>
				<li><a href="/archives.html#cover" title="View the blog archives" tabindex="0">Archives</a></li>
				<li><a href="http://jfoucher.fr" title="Go to the portfolio" tabindex="0">Portfolio</a></li>
				<li><a href="http://feeds.feedburner.com/GeekyNuggets" title="Feed link" tabindex="0">Feed</a></li>
            </ul>
			<div class="sitesearch floatRight">
                <div class="sitesearch">
                    <!-- Google Custom Search Element -->
                    <form action="http://www.google.com/cse" class="center_column" />
                    <fieldset>
                       <input type="hidden" name="cx" value="004905032692135561336:flcwnz7i1ww" />
                       <input type="hidden" name="ie" value="UTF-8" />
                       <input id="search" class="text-input" type="text" name="q" size="15" tabindex="0" accesskey="S" />
                       <input id="searchsubmit" type="submit" name="sa" value="Search" tabindex="0" />
                    </fieldset>
                </div>
            </div>
			<div class="clear"></div>
        </div> <!-- /#nav.clear -->

		<div id="notebook" class="center clear">
			<div class="page-nav-top">
                
				    <span class="page-nav-item floatLeft"><a class="internal" rel="prev"  href="/2011/01/14/spanish-characters-on-qwerty-keyboard-for-ubuntu-10-10.html#notebook" title="View Spanish characters on Qwerty keyboard for Ubuntu 10.10">&larr; View previous article</a></span>
				
				
				    <span class="page-nav-item floatRight"><a class="internal" rel="next"  href="/2011/02/13/installing-running-apc-cache-codeigniter.html#notebook" title="View Installing and running APC cache with CodeIgniter">View next article &rarr;</a></span>
                
            </div> <!-- /.page-nav-top -->
            <div class="entry-content colEight">
                <h2 class="clear">Wordpress 404 notification by email</h2>
                <span class="date" title="2011-01-22T23:42:45+01:00">
                    <span class="published">Published&thinsp;&bull;</span>
                    <span class="day">22</span>
                    <span class="month"><abbr>Jan</abbr></span>
                    <span class="year">2011</span>
                </span>
                <p>I couldn't find something that did just what I wanted and no more: send me an email when someone gets a 404 error on my blog. It seems pretty simple, and it really is. More than that actually. It's problably the simplest plugin I've ever written.</p>

<p>Check it out:</p>

<div class="highlight"><pre><code class="php"><span class="x">function email_error(){</span>
<span class="x">    global $wp_query;</span>
<span class="x">    $location=$_SERVER[&#39;REQUEST_URI&#39;];</span>
<span class="x">    if ($wp_query-&amp;gt;is_404){</span>
<span class="x">        email_admin($location);</span>
<span class="x">    }</span>
<span class="x">}</span>
<span class="x">add_action(&#39;get_header&#39;, &#39;email_error&#39;);</span>
</code></pre>
</div>


<p>This is the main part of the code, the one gets executed everytime the</p>

<div class="highlight"><pre><code class="php"><span class="x">get_header</span>
</code></pre>
</div>


<p> hook is called. It basically just checks the $wp_query object to see if the current url gives a 404 error and then passes that url to the email_admin function</p>

<div class="highlight"><pre><code class="php"><span class="x">function email_admin($location){</span>
<span class="x">    $name=get_option(&#39;blogname&#39;);</span>
<span class="x">    $email = get_option(&#39;admin_email&#39;);</span>
<span class="x">    $headers  = &quot;MIME-Version: 1.0\r\n&quot;;</span>
<span class="x">    $headers .= &quot;Content-type: text/plain; charset=UTF-8\r\n&quot;;</span>
<span class="x">    $headers .= &#39;From: &quot;&#39; . $name . &#39;&quot; &amp;lt;&#39; .$email. &quot;&amp;gt;\r\n&quot;;</span>
<span class="x">    $subject=&#39;404 error in &#39;.$name;</span>
<span class="x">    $body=&#39;A 404 error occured at the following url: &#39;.$_SERVER[&#39;SERVER_NAME&#39;].$location;</span>
<span class="x">    @mail($email,$subject,$body,$headers);</span>
<span class="x">}</span>
</code></pre>
</div>


<p>This function sets some headers for the email, such as the sender's name and email, and the subject of the message, and then sends the message. No error is shown if the message can't be sent, as this would be displayed on the page.</p>

<p><strong>UPDATE</strong>: Finally available on the <a href="http://wordpress.org/extend/plugins/email-404/">wordpress plugin repository</a><p></p>

<p>I couldn't find something that did just what I wanted and no more: send me an email when someone gets a 404 error on my blog. It seems pretty simple, and it really is. More than that actually. It's problably the simplest plugin I've ever written.</p>


<p>Check it out:<br />

<div class="highlight"><pre><code class="php"><span class="x">&lt;br /&gt;</span>
<span class="x">function email_error(){&lt;br /&gt;</span>
<span class="x">    global $wp_query;&lt;br /&gt;</span>
<span class="x">    $location=$_SERVER[&#39;REQUEST_URI&#39;];&lt;/p&gt;</span>
<span class="x">&lt;p&gt;   if ($wp_query-&gt;is_404){&lt;br /&gt;</span>
<span class="x">        email_admin($location);&lt;br /&gt;</span>
<span class="x">    }&lt;br /&gt;</span>
<span class="x">}&lt;br /&gt;</span>
<span class="x">add_action(&#39;get_header&#39;, &#39;email_error&#39;);&lt;br /&gt;</span>
</code></pre>
</div>

<br />
This is the main part of the code, the one gets executed everytime the 
<div class="highlight"><pre><code class="php"><span class="x">get_header</span>
</code></pre>
</div>

 hook is called. It basically just checks the $wp_query object to see if the current url gives a 404 error and then passes that url to the email_admin function</p>


<p>
<div class="highlight"><pre><code class="php"><span class="x">&lt;br /&gt;</span>
<span class="x">function email_admin($location){&lt;br /&gt;</span>
<span class="x">    $name=get_option(&#39;blogname&#39;);&lt;br /&gt;</span>
<span class="x">    $email = get_option(&#39;admin_email&#39;);&lt;br /&gt;</span>
<span class="x">    $headers  = &quot;MIME-Version: 1.0\r\n&quot;;&lt;br /&gt;</span>
<span class="x">    $headers .= &quot;Content-type: text/plain; charset=UTF-8\r\n&quot;;&lt;br /&gt;</span>
<span class="x">    $headers .= &#39;From: &quot;&#39; . $name . &#39;&quot; &lt;&#39; .$email. &quot;&gt;\r\n&quot;;&lt;br /&gt;</span>
<span class="x">    $subject=&#39;404 error in &#39;.$name;&lt;br /&gt;</span>
<span class="x">    $body=&#39;A 404 error occured at the following url: &#39;.$_SERVER[&#39;SERVER_NAME&#39;].$location;&lt;br /&gt;</span>
<span class="x">    @mail($email,$subject,$body,$headers);&lt;br /&gt;</span>
<span class="x">}&lt;br /&gt;</span>
</code></pre>
</div>

</p>


<p>This function sets some headers for the email, such as the sender's name and email, and the subject of the message, and then sends the message. No error is shown if the message can't be sent, as this would be displayed on the page.</p>


<p>Until approval by the wordpress.org guys, you can download it here: <a href='http://cdn.jfoucher.com/uploads/2011/01/email-404.zip'>Email 404 Wordpress plugin</a></p>


<p></p></p>

<p></p>


                <div class="meta">
                    <!-- <span class="pdf">Download a <a href="/2011/01/22/wordpress-email-404-notification.html.pdf" title="Download a PDF, printer-friendly copy of this article"><acronym title="Portable Document Format">PDF</acronym>, printer-friendly version of this article</a>.</span> -->
                    <span class="permalink">For referencing: <a href="/2011/01/22/wordpress-email-404-notification.html" title="[Permalink] Wordpress 404 notification by email">permalink to this article</a>.</span>
                </div> <!-- /.meta -->
            </div> <!-- /.entry-content.colEight -->
            <div class="page-nav-bottom">
                
				    <span class="page-nav-item floatLeft"><a class="internal" rel="prev"  href="/2011/01/14/spanish-characters-on-qwerty-keyboard-for-ubuntu-10-10.html#notebook" title="View Spanish characters on Qwerty keyboard for Ubuntu 10.10">&larr; View previous article</a></span>
				
				
				    <span class="page-nav-item floatRight"><a class="internal" rel="next"  href="/2011/02/13/installing-running-apc-cache-codeigniter.html#notebook" title="View Installing and running APC cache with CodeIgniter">View next article &rarr;</a></span>
                
            </div> <!-- /.page-nav-bottom -->
        </div> <!-- /#notebook.center.clear -->
                <div id="footer" class="center clear">
			<ul class="nav nav-footer caps">
				<li><a href="/about.html" title="About &amp; contact information" tabindex="0">About <span class="amp">&amp;</span> Contact</a></li>
				<li><a href="/archives.html#cover" title="View the notebook entries" tabindex="0">Notebook</a></li>
				<li><a href="/#portfolio" title="Skip back up to the portfolio" tabindex="0">Portfolio</a></li>
				<li><a href="http://feeds.feedburner.com/klepas" title="Feed link" tabindex="0">Feed</a></li>
			</ul>
			<span class="backtop floatRight"><a class="internal" href="#header" title="Return to the top of this page">Back to top &uarr;</a></span>
			<div class="page-meta clear">
				<div class="info">
					<span class="index">&#9758;</span><p class="vcard"><a href="/files/Simon-Pascal-Klein.vcf" title="Download Simon Pascal Klein&rsquo;s addressbook vCard">Add me to your address book via vCard</a>.</p>
					<p class="copyright clear">Proudly bending beziers since <abbr class="date" title="2004">MMIV</abbr>&ndash;; copyright &copy; Simon Pascal Klein thereon.</p>
					<p class="licensing"><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/2.5/au/" title="Content, unless specificed, licensed under a Creative Commons license">Some rights reserved</a>.</p>
					<p>For an overview of the site, see the <a href="/sitemap/" title="View the site map">site map</a> or <a href="/archives.html#cover" title="View the notebook archives">notebook archives</a>.</p>
					<h2>A playful tumble with <em>type</em>&hellip; &rarr;</h2>
					<p>&hellip;yes, <em>type</em>, not a graphic; try selecting it or resizing the page font size. Inspired by <a href="http://jontangerine.com/" title="jontangerine.com: Jon Tan&rsquo;s website">Jon Tan</a>&rsquo;s masterhead type folly, this is achieved just with some simple nested <code><span class="element">span</span></code> elements that are positioned absolutely against their relative parents, and the entire thing is sized in ems and scales nicely.</p>
				</div>
				<div class="type-folly">
					<em>Type
						<span>set
							<span>with
								<span>love
									<span>{
										<span>&hearts;
											<span>}</span>
										</span>
									</span>
								</span>
							</span>
						</span>
					</em>
					<strong>in
						<span>Georgia
							<span>&amp;
								<span>Museo</span>
							</span>
						</span>
					</strong>
					<span class="markup">&hellip;all in mostly valid <a rel="external" href="http://jigsaw.w3.org/css-validator/check/referer"><acronym title="Cascading Style Sheets">CSS</acronym></a> <span class="amp">&amp;</span> <a rel="external" href="http://validator.w3.org/check?uri=referer"><acronym title="eXtensible Hyper Text Markup Language">XHTML</acronym></a>; as <acronym title="plain old semantic (X)HTML">POSH</acronym> as can be.</span>
				</div>
			</div> <!-- /.page-meta.clear -->
		</div> <!-- /#footer.center.clear -->
	</div>
</body>
</html>
