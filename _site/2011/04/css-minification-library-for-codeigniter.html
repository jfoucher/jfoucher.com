<!DOCTYPE html> 
<html lang="en">
<!--
	Access keys:
		H = homepage
		S = search input field
		L = latest article on the homepage
		A = about page
-->
<head>
    <title>
        CSS minification library for codeigniter
        
    </title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<meta http-equiv="content-language" content="en" />
	<meta name="author" content="Jonathan Foucher" />
	<meta name="designer" content="Jonathan Foucher" />
	<meta name="developer" content="Jonathan Foucher" />
	<meta name="description" content="This library allows you to serve cached minimized css to your users without any action on your part" />
	<meta name="keywords" content="Web development, france, wordpress, codeigniter, linux, ubuntu, debian, system administration" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0" />
	<link rel="license" href="http://creativecommons.org/licenses/by-nc-nd/2.5/en/" />
    <link href='http://fonts.googleapis.com/css?family=Questrial' rel='stylesheet' type='text/css'>
	<!--<link rel="stylesheet" href="/assets/css/screen.css" type="text/css" media="screen" />-->

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>

    <script src="/assets/js/jquery.timeago.js" type="text/javascript"></script>
	<script type="text/javascript" src="/assets/js/app.js"></script>
    <link rel="stylesheet" href="/assets/css/screen.css" type="text/css" media="screen" />
    <script src="/assets/js/less-1.1.4.js" type="text/javascript"></script>
    <!--[if lt IE 9]>
    <script type="text/javascript" src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <script type="text/javascript" src="http://www.shrinktheweb.com/scripts/pagepix.js"></script>
	<link rel="alternate" href="http://feeds.feedburner.com/GeekyNuggets" title="Geeky Nuggets" type="application/atom+xml" />

	<link rel="shortcut icon" type="image/png" href="/favicon.png" />

</head>
<body>


	<div id="container" class="clearfix">
		                <header id="header" class="center">
            <div class="logo">
                <a href="/" title="Return to homepage" tabindex="0" accesskey="H">
                    Geeky Nuggets
                </a>
            </div>
            <div class="siteDesc"><a href="/about.html#notebook" title="About Jonathan Foucher
                &amp; contact details" tabindex="0" accesskey="A">Jonathan Foucher</a>&rsquo;s blog <span
                class="amp">&amp;</span> web development
                notebook.
            </div>
                    <nav id="nav" class="clear">
            <ul class="nav nav-header caps">
				<li><a href="/about.html#notebook" title="About &amp; contact information" tabindex="0">About <span class="amp">&amp;</span> Contact</a></li>
				<li class="active"><a href="/archives.html#cover" title="View the blog archives" tabindex="0">Archives</a></li>
				<li><a href="/projects/#notebook" title="Go to the code portfolio of Jonathan Foucher" tabindex="0">Projects</a></li>
				<li><a href="http://feeds.feedburner.com/GeekyNuggets" title="Subscribe to my posts, by email or in your feed reader" tabindex="0">Feed</a></li>
            </ul>
			<div class="sitesearch">

                <!-- Google Custom Search Element -->
                <!--<form action="http://www.google.com/cse" class="center_column" id="searchForm" >
                    <fieldset>
                       <input type="hidden" name="cx" value="004905032692135561336:flcwnz7i1ww" />
                       <input type="hidden" name="ie" value="UTF-8" />
                       <label for="search" class="hidden">Search</label>
                       <input id="search" class="text-input" type="text" name="q" size="15" tabindex="0" accesskey="S" />
                       <input id="searchsubmit" type="submit" name="sa" value="Search" tabindex="0" />
                    </fieldset>
                </form>-->

            </div>

        </nav> <!-- /#nav.clear -->


            
		</header> <!-- /#header.center -->


		<div id="notebook" class="center clear">
			<div class="page-nav-top">
                
				    <span class="page-nav-item page-prev"><a class="internal" rel="prev"  href="/2011/04/the-making-of-flickholdr-an-image-placeholder-generator.html#notebook" title="View The making of flickholdr.com, an image placeholder generator">&larr; View previous article</a></span>
				
				
				    <span class="page-nav-item page-next"><a class="internal" rel="next"  href="/2011/06/phing-task-to-update-twitter-status.html#notebook" title="View A Phing task to update your Twitter status">View next article &rarr;</a></span>
                
            </div> <!-- /.page-nav-top -->

             <h2 class="post-title">
                <a href="/2011/04/css-minification-library-for-codeigniter.html#notebook" title="Permanent link to CSS minification library for codeigniter">
                    CSS minification library for codeigniter
                </a>
            </h2>

            <div class="meta">
                <div class="hero">

                    <p>
                        This library allows you to serve cached minimized css to your users without any action on your part
                    </p>
                </div>
                <!-- <span class="pdf">Download a <a href="/2011/04/css-minification-library-for-codeigniter.html.pdf" title="Download a PDF, printer-friendly copy of this article"><acronym title="Portable Document Format">PDF</acronym>, printer-friendly version of this article</a>.</span> -->
                <span class="permalink">For referencing: <a href="/2011/04/css-minification-library-for-codeigniter.html" title="[Permalink] CSS minification library for codeigniter">permalink to this article</a>.</span>
                    <span class="date" title="2011-04-11T12:10:51+00:00">
                    <span class="published">Published&thinsp;&bull;</span>
                    <span class="day">11</span>
                    <span class="month"><abbr>Apr</abbr></span>
                    <span class="year">2011</span>
                </span>
            </div> <!-- /.meta -->
            <div id="entry-content">

                <p>For my latest project, I wanted to be able to easily minify CSS stylesheets, using the simplest syntax possible, ideally using a simple tag in the header, like</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">css</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;/assets/css/fonts.css&#39;</span><span class="p">,</span><span class="s1">&#39;/assets/css/layout.css&#39;</span><span class="p">);</span><span class="cp">?&gt;</span><span class="x"></span>
</code></pre>
</div>


<p>After some searching, I found a css minification library for PHP, <a href="https://code.google.com/p/minify/">minify</a></p>

<p>It was very easy to modify it so that It could be used in our CodeIgniter applications like any other libraries.
All I did was wrap the main minification function in Codeigniter specific code.
I modelled the interaction on the image library, as I guess that's what most people are used to.</p>

<div class="image-with-caption aligncenter" style="width:300px"><div class="caption">css minification library for codeigniter</div><a href="http://cdn.jfoucher.com/uploads/2011/04/Screenshot.png"><img class="size-medium wp-image-450" title="css minification for codeigniter" src="http://cdn.jfoucher.com/uploads/2011/04/Screenshot-300x162.png" alt="css minification for codeigniter" width="300" height="162" /></a></div>




<h3>How to use</h3>


<p>Using the library involves loading it, setting up an array with some configuration values, such as the source css file(s), the destination file (optional) or the time that the generated file should be cached, and finally initializing the library with the configuration array() .</p>

<p>The following code, which should go in your controller, will look very familiar to Codeigniter users.</p>

<div class="highlight"><pre><code class="php"><span class="cp">&lt;?php</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">load</span><span class="o">-&gt;</span><span class="na">library</span><span class="p">(</span><span class="s1">&#39;css&#39;</span><span class="p">);</span>
<span class="c1">//array of files to concatenate and minify</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;source_file&#39;</span><span class="p">]</span><span class="o">=</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;/assets/css/layout.css&#39;</span><span class="p">,</span><span class="s1">&#39;/assets/css/fonts.css&#39;</span><span class="p">);</span>
<span class="c1">//where to output the result</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;dest_file&#39;</span><span class="p">]</span><span class="s1">&#39;/assets/css/css.min.css&#39;</span><span class="p">;</span>
<span class="c1">//Cache time in hours</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">&#39;cache_time&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">48</span><span class="p">;</span>
<span class="nv">$this</span><span class="o">-&gt;</span><span class="na">css</span><span class="o">-&gt;</span><span class="na">initialize</span><span class="p">(</span><span class="nv">$config</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">css</span><span class="o">-&gt;</span><span class="na">link</span><span class="p">();</span>
<span class="cp">?&gt;</span><span class="x"></span>
</code></pre>
</div>


<p>Will output the following stylesheet tag:</p>

<div class="highlight"><pre><code class="html"><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;/assets/css/css.min.css&quot;</span> <span class="na">type=</span><span class="s">&quot;text/css&quot;</span> <span class="na">media=</span><span class="s">&quot;screen&quot;</span> <span class="nt">/&gt;</span>
</code></pre>
</div>




<h3>Get It!</h3>


<p>You can <a href="https://github.com/jfoucher/codeigniter-css-library">get it from GitHub</a>. Don't forget to fork it if you think you can make it better!</p>

<h3>Finally</h3>


<p>I'm not sure the way I've done it, using a</p>

<div class="highlight"><pre><code class="php"><span class="x">$config</span>
</code></pre>
</div>


<p> array and so on, is the best way. It might be a bit overkill for such a simple library. I'd love to hear your thoughts on the subject.</p>



                <div id="disqus_thread"></div>
                <script type="text/javascript">
                    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                    var disqus_shortname = 'geekynuggets'; // required: replace example with your forum shortname

                    /* * * DON'T EDIT BELOW THIS LINE * * */
                    (function() {
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
            </div> <!-- /.entry-content.colEight -->
            <div class="page-nav-bottom">
                
				    <span class="page-nav-item page-prev"><a class="internal" rel="prev"  href="/2011/04/the-making-of-flickholdr-an-image-placeholder-generator.html#notebook" title="Read The making of flickholdr.com, an image placeholder generator">&larr; View previous article</a></span>
				
				
				    <span class="page-nav-item page-next"><a class="internal" rel="next"  href="/2011/06/phing-task-to-update-twitter-status.html#notebook" title="Read A Phing task to update your Twitter status">View next article &rarr;</a></span>
                
            </div> <!-- /.page-nav-bottom -->
        </div> <!-- /#notebook.center.clear -->
            <footer id="footer" class="clear">
        <span class="backtop"><a class="internal" href="#header" title="Return to the top of this page">Back to top &uarr;</a></span>
        <nav>
            <ul id="nav-footer">
                <li><a href="/about.html" title="About &amp; contact information" tabindex="0">About <span class="amp">&amp;</span> Contact</a></li>
                <li><a href="/archives.html#cover" title="View the blog archives" tabindex="0">Archives</a></li>
                <li><a href="/projects/#notebook" title="Go to the code portfolio of Jonathan Foucher" tabindex="0">Projects</a></li>
                <li><a href="http://feeds.feedburner.com/GeekyNuggets" title="Feed link" tabindex="0">Feed</a></li>
            </ul>
        </nav>

        <div class="page-meta clear">
            <div class="info">

                <p class="copyright ">
                    This blog has been online in one form or another since
                    <span class="date" title="March 2004">2004</span><br />Copyright &copy; <a href="http://jfoucher.com">Jonathan
                    Foucher.</a><br /><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"
                       title="You can use this for non-comercial purposes, provided you cite me as the author, and do not modify the content">
                        Creative Commons License
                    </a>.
                </p>
            </div>

        </div> <!-- /.page-meta.clear -->
    </footer> <!-- /#footer.center.clear -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-8465441-2']);
    _gaq.push(['_trackPageview']);



    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') +
        '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    </script>
            
    <!-- Piwik -->
    <script type="text/javascript">
    var pkBaseURL = (("https:" == document.location.protocol) ? "https://stats.6px.eu/" : "http://stats.6px.eu/");
    document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
    </script><script type="text/javascript">
    try {
    var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
    piwikTracker.trackPageView();
    piwikTracker.enableLinkTracking();
    } catch( err ) {}
    </script><noscript><p><img src="http://stats.6px.eu/piwik.php?idsite=1" style="border:0" alt="" /></p></noscript>
    <!-- End Piwik Tracking Code -->

</body>
</html>
	</div>
